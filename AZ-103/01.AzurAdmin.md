# Préparations pour les LABs Microsoft - Module 01
## Requis
À partir de l’adresse https://docs.microsoft.com/en-us/powershell/azure/install-Az-ps?view=azps-3.0.0
* Update to Windows PowerShell 5.1 if needed. If you're on Windows 10, you already have PowerShell 5.1 installed.
> $PSVersionTable.PSVersion

## PowerShell
> Install-Module -Name Az -AllowClobber -Scope CurrentUser
* Si nous avons multiples utilisateurs opérateurs sur Azure, quelle commande faut-il utiliser (AllUsers)
  > Install-Module -Name Az -AllowClobber -Scope AllUsers

## .Net
À partir de l’adresse https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-determine-which-versions-are-installed#net_d	
* Install .NET Framework 4.7.2 or later.
> (Get-ItemProperty "HKLM:SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full").Release -ge 461808

## Azur CLI
https://docs.microsoft.com/fr-ch/cli/azure/?view=azure-cli-latest
* lancer la commande AZ dansun cmo (admin)
https://aka.ms/installazurecliwindows
* MSI installer

# LABs
## Exercice 1: Cloud Shell
* cliquer sur l'icône "Cloud Shell" (>\_) en haut milieu droite
* choisir PowerShell
* créer un storage (Free trial account)
* Taper la commande
> Get-AzSubscription
* Affichage ?
> Fet-AzResourceGroup
* Affichage ?
* Basculer via le menu "drop-down" **PowerShell[v]** sur le **Bash**
> az account list
> az resource list
> code
* Utiliser {} et ...

## Exercice 2: Working with PowerShell Locally
### Az module pour Powershell
Pour autoriser l'exécution des scripts (Erreur: CouldNotAutoloadMatchingModule)
> Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope LocalMachine
Lancer un Power Shell en mode 'run as admin': Installation du module Az (AllUsers)
> Install-Module -Name Az -AllowClobber
On peut y lancer des commande Azur CLI: Requis, Az installé, cf début de cette page.
> az login
Cette commande peut être utilisée aussi bien dans un PowerShell quand dans un 'cmd', pourquoi ?
* idem que ?
> Login-AzAccount
Non: Pourquoi ? La sessions doit être initiée depuis le module CLI comme pour l'univers PowerShell.
* Mais ceci ne fonctionnera que dans un PowerShell, après avoir installé le module ([MSI](https://aka.ms/installazurecliwindows) package)
* Un timout de 20 minutes sur inactivité déconnectera la session.



***Suite:*** https://microsoftlearning.github.io/AZ-103-MicrosoftAzureAdministrator/
